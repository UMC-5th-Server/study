- 쿠키
  - 쿠키를 이용해서 서버는 브라우저에 데이터를 넣을 수 있음.
  - 사이트 방문 → 브라우저가 서버에 요청 보냄. 서버는 이에 응답. 응답에는 모든 데이터와 내가 찾던 페이지 정보가 들어있음. 그리고 브라우저에 저장하고자 하는 쿠키가 있을 수 있음.
  - 쿠키를 저장 후 해당 웹사이트에 방문할 때 마다 브라우저는 해당 쿠키도 요청과 함꼐 보내게 됨.
  - 쿠키는 도메인에 따라 제한 됨. ex) 유튜브가 준 쿠키는 유튜브에만 보내지게 됨.
  - 쿠키는 유효기간이 있음. 서버가 정한 기간에 따라 유효.
  - 쿠키는 인증 뿐만 아니라 여러가지 정보를 저장할 수 있음.
    ex) 웹 사이트 언어설정을 바꾸면, 서버는 쿠키를 주고 내가 선택한 언어를 저장. 다음에 해당 웹사이트를 방문했을 때 쿠키는 요청과 함께 서버로 보내지고, 서버는 쿠키가 기억해둔 언어설정의 페이지를 제공함.

\*\* HTTP → stateless

- stateless
  - 서버로 가는 모든 요청이 이전 리퀘스트와 독립적으로 다뤄진다는 뜻. 요청끼리 연결이 없음. 요청이 끝나면 서버는 누가 보냈는지 이 누구를 잊어버림. 따라서 요청마다 누군지 알려줘야함. 이를 하는 방법 중 하나가 **세션 Session**
  - 세션
    - 해당 사용자의 아이디/비번이 맞다면 서버는 세션 db에 유저 생성. 해당 세션에는 별도의 ID 가 있음. 해당 세션 ID는 쿠키를 통해 브라우저로 돌아오고 저장됨.
    - 따라서 같은 웹사이트의 다른 페이지로 이동하면, 브라우저는 세션 ID를 갖고 있는 쿠키를 서버에게 보냄. 쿠키는 자동으로 보내지기 때문. 서버는 들어오는 쿠키를 보고, 세션 ID와 함께 오는 쿠키를 확인함. but, 아직까지도 서버는 우리가 누구인지 모름. 세션ID가 있는 쿠키를 지니 요청이 있다는 것만 아는 것.
    - 해당 세션 ID를 가지고 세션 DB를 확인할 것이고, 거기서 해당 ID는 유저명 즉, 해당 유저의 것이라는 걸 알게 되고, 그제서야 서버는 해당 유저가 누군지 알게 되고 해당 페이지를 띄움.
    - 해당 요청이 끝나고 다른 페이지로 이동하게 되면, 이 모든 프로세스가 반복됨.
  즉, 쿠키 → 세션 ID를 전달하기 위한 매개체임.
  ** 안드로이드, iOS 는 쿠키 사용할 수 없음. 브라우저에만 있는 것이니까. 쿠키는 네이티브 앱에는 없음. 따라서 이 경우에는 **토큰 Token\*\* 을 사용함. 즉, 서버에 토큰을 보내는 것.
  - 토큰
    - string 형태
    - 해당 토큰을 서버에 보내고 서버는 세션 DB에서 해당 토큰과 일치하는 유저를 찾음.
    - 현재 로그인한 유저들의 모든 세션 ID를 DB에 저장해야함. 즉, 요청이 들어올 때 마다 서버는 쿠키를 받아서 세션 ID를 보고 세션 ID와 일치하는 유저를 찾아야하고, 그제서야 다음 작업을 수행할 수 있음. 요청이 있을 때 마다 DB를 찾고 해야함.
      즉, 유저가 늘어남에 따라 DB 리소스가 더 필요한 것. 이때 나온게 **JWT**
  - JWT
    - 토큰 형식
    - JWT로 유저 인증 처리하려면 세션 DB를 갖을 필요가 없고, 서버는 유저 인증한다고 많은 일을 하지 않아도 됨.
    - 엄청 길다. 보통 세션 ID보다 훨씬 길어. 왜냐면 쿠키는 또한 공간 제약이 있지만 JWT는 제약이 없어서 갠춘
    - session 과 다른게 JWT는,
      ex) 한 유저가 로그인을 하려면, 유저명/비번을 서버에 보내야함.
      - 유저명, 비번이 맞다면 서버는 DB에 뭔가를 생성하지 않음. 대신 서버는 유저의 ID를 가져다가 (예를 들어) 사인 알고리즘을 이용해서 ‘사인’을 할거임. 그리곤 해당 ‘사인된 정보’를 string 형태로 보낼 거임.
      → DB를 건드리는 대신, 정보를 사인하고 전달하는게 끝
      - 서버에 요청을 보내려면, 세션ID와 비슷하게 해당 ‘사인된 정보’ 혹은 토큰을 서버에 보내야함.
      - 서버는 토큰을 받으면 해당 사인이 유효한지 체크하고 유효하다면 서버는 해당 유저를 유저로 인증함.
      <aside>
      💡 즉, 세션에선 그냥 세션 ID만 주면 되는데 세션에 대한 모든 정보는 세션 DB에 저장되어있음. 페이지를 요청하면 서버는 세션 ID를 DB에서 찾으면 되는 것.
      반면에, JWT에서는 서버는 유저를 인증하는데 필요한 정보를 토큰에 저장. 그리고선 해당 토큰을 유저한테 줌. 페이지를 요청하면 서버는 해당 토큰이 유효한지만 검증하면 됨. DB를 거칠 필요가 없음.
      </aside>
      - JWT는 암호화 되지 않음. 따라서 비밀정보를 JWT 안에 두면 안됨.

- session vs JWT 장단점
  - 세션
    - 서버로 로그인된 유저의 모든 정보를 저장. 해당 정보를 이용하면 새로운 기능들을 추가할 수 있게 됨.
      ex) 특정 유저를 쫓아내고 싶을 때, 그냥 세션을 삭제해버리면 됨. 혹은 인스타처럼 원하지 않는 디바이스에서 강제 로그아웃을 할 수 있음. 혹은, 넷플릭스처럼 계정 공유 숫자를 제한 할 수 있음. 현재 로그인을 몇명이 했고 시청하는지 알 수 있음.
    - 서버가 누가 로그인 했는지 저장했고 세션 DB가 있기에 가능.
    - 이를 위해서는 DB를 사고, 유지해야함. 주고 redis 사용
  - JWT
    - 생성된 토큰을 추적하지 않음.
    - 서버가 아는 것은 토큰이 유효한가 여부일 뿐.
    - 따라서 DB를 따로 살 필요 없음. 따라서 강제 로그아웃 등의 기능을 할 수 없음. 해당 토큰이 만료되기 전까지는 유효하기 때문.
  \*\* 서비스가 더 커지고 유저 계정을 좀 더 잘 관리하고 싶다 → 그때 세션으로 옮겨타면 됨
