# 4주차 스터디 : JWT

### 1. 세션 vs 토큰 vs 쿠키

**쿠키**

- 서버는 브라우저에 데이터를 넣을 수 있음
- 사이트에 방문 -> 브라우저는 서버에 요청 -> 서버 응답엔 브라우저에 저장하고자 하는 쿠키가 있을 수 있음
- 해당 웹사이트에 방문할 때마다 해당 쿠키도 요청과 함께 전송
- 쿠키는 도메인에 제한 + 유효기간 O
- 쿠키는 브라우저에만 존재 + 네이티브 앱에는 존재하지 않음

**세션**

- 서버로 가는 모든 요청은 이전 요청과는 독립적 (stateless)
- 따라서 서버로 요청을 보낼 때마다 우리가 누군지 알려줘야 함 -> 이때 세션 사용

- 로그인 성공 시 서버는 세션DB에 유저 생성
- 세션은 별도의 ID를 가짐
- 세션 ID는 쿠키를 통해 브라우저로 돌아오며 저장됨
- 세션 ID로 세션 DB를 확인 -> 유저 식별 가능

**토큰**

- 네이티브 앱에서는 쿠키 사용 불가 -> 이때 토큰 사용
- String 형태
- 서버는 세션 DB에서 토큰과 일치하는 유저 찾음 (단, 현재 로그인한 유저들의 모든 세션 ID를 DB에 저장)

**JWT**

- 토큰 형식
- 세션 DB 필요 없음 + 서버는 유저 인증을 위해 리소스 낭비할 필요 X
- Username, password가 맞다면 서버는 DB에 뭔가를 생성 X
- 유저 id로 사인 알고리즘을 이용해 사인을 생성 -> 사인된 정보를 String 형태로 전송
- 세션 ID보다 긴 길이
- 모든 요청마다 서버는 토큰이 유효한지 체크

- 형태
  - Header: JWT 토큰 유형 + 서명 알고리즘 정의
  - Payload: 클레임(등록, 공개, 비공개)
  - Signature: Header 인코딩 값과 Data의 인코딩을 합친 후 주어진 private key로 해시 후 생성
